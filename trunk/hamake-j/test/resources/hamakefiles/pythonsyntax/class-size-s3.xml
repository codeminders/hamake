<?xml version="1.0" encoding="UTF-8"?>

<project name="test">

    <config>
        <property name="output"  value="s3://hamake/test/"/>
        <property name="lib"     value="s3://hamake/lib/"/>
        <property name="dist"    value="s3://hamake/"/>
        <property name="scripts" value="s3://hamake/"/>
    </config>

    <map name="jar-listings">
        <input>
            <path location="%(lib)s/" mask="*.jar"/>
        </input>
        <dependencies/>

        <output>
            <path location="%(output)s/jar-listings"/>
        </output>

        <task jar="%(dist)s/hamake-examples-1.0.jar" main="com.codeminders.hamake.examples.JarListing">
            <pathparam type="inputfile"/>
            <pathparam type="outputfile"/>
        </task>
    </map>

    <map name="filter-listing">
        <input>
            <path location="%(output)s/jar-listings"/>
        </input>
        <dependencies/>

        <output>
            <path location="%(output)s/jar-listings-filtered"/>
        </output>

        <task jar="%(dist)s/hamake-examples-1.0.jar" main="com.codeminders.hamake.examples.JarListingFilter">
            <pathparam type="inputfile"/>
            <pathparam type="outputfile"/>
        </task>
    </map>

    <reduce name="histogram">

        <input>
            <path location="%(output)s/jar-listings-filtered"/>
        </input>
        
        <output>
            <path location="%(output)s/class-size-histogram"/>
        </output>

        <task jar="%(dist)s/hamake-examples-1.0.jar" main="com.codeminders.hamake.examples.ClassSizeHistogram">
            <pathparam type="input"/>
            <pathparam type="output"/>
        </task>
        
    </reduce>

</project>